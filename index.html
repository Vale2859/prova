<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Portale Farmacia Montesano</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <script src="script.js" defer></script>

  <link rel="apple-touch-icon" sizes="180x180" href="logo.jpg">
  <link rel="icon" type="image/png" href="logo.jpg">
</head>
<body>

  <!-- ============ LOGIN ============ -->
  <div id="authContainer" class="auth-container">
    <div class="auth-card">
      <div class="auth-logo-wrap">
        <img src="logo.jpg" alt="Farmacia Montesano" class="auth-logo" />
      </div>
      <h1>Portale Farmacia Montesano</h1>
      <p class="auth-intro">
        Seleziona il tipo di accesso e inserisci le credenziali.
      </p>

      <div class="auth-tabs">
        <button class="auth-tab active" data-role="farmacia">Farmacia</button>
        <button class="auth-tab" data-role="titolare">Titolare</button>
        <button class="auth-tab" data-role="dipendente">Dipendente</button>
      </div>

      <p class="auth-subtitle">
        Accesso come: <span id="loginRoleLabel">Farmacia</span>
      </p>

      <form id="loginForm" class="auth-form">
        <div class="form-row">
          <label for="loginUsername">Username</label>
          <input id="loginUsername" type="text" placeholder="Inserisci username" />
        </div>
        <div class="form-row">
          <label for="loginPassword">Password</label>
          <input id="loginPassword" type="password" placeholder="Inserisci password" />
        </div>
        <button type="submit" class="btn-primary wide">Entra</button>
        <p class="login-hint">
          Demo: per ora puoi inserire qualsiasi username e password.
        </p>
      </form>
    </div>
  </div>

  <!-- ============ APP PRINCIPALE ============ -->
  <main id="app" class="app hidden">

    <!-- HEADER + LOGO + FARMACIA DI TURNO -->
    <header class="app-header">
      <div class="header-left">
        <img src="logo-farmacia-montesano.jpg" alt="Farmacia Montesano" class="header-logo-big" />
        <div>
          <h1 class="header-title">FARMACIA MONTESANO</h1>
          <p class="header-subtitle-main">PORTALE INTERNO</p>
          <span id="currentRolePill" class="role-pill">Farmacia (accesso generico)</span>
        </div>
      </div>
      <div class="header-right card card-mini-turno">
        <h2 class="turno-title">Farmacia di turno oggi</h2>
        <div id="turnoTodayInfo" class="turno-info">
          <!-- riempito da JS -->
        </div>
      </div>
    </header>

    <!-- DASHBOARD -->
    <section id="dashboard" class="dashboard">

      <div class="cards-grid-main">

        <!-- ASSENTI OGGI -->
        <article class="card card-assenti">
          <div class="card-top-row">
            <div class="card-top-left">
              <p id="assenzeOggiDataLabel" class="assenze-data-label">Mer 26 Nov</p>
              <h2 class="card-title">Assenti oggi</h2>
            </div>
            <button class="card-notif-badge" data-card="assenze">
              <span class="badge-label">NUOVI</span>
              <span class="badge-dot"></span>
              <span class="badge-count">0</span>
            </button>
          </div>

          <div class="assenti-content">
            <div class="assenti-left">
              <div>
                <ul id="listaAssentiOggi" class="assenze-list">
                  <!-- riempito da JS -->
                </ul>
              </div>

              <h3 class="assenti-subtitle">Assenti prossimamente</h3>
              <ul id="listaAssentiProssimi" class="assenze-list">
                <!-- riempito da JS -->
              </ul>

              <button id="btnVaiTuttiAssenti" class="btn-primary assenti-btn">
                Vai a tutti gli assenti
              </button>
            </div>

            <div class="assenti-right">
              <div class="cal-mini-header">
                <button id="calPrevMonth" class="cal-nav">&lt;</button>
                <span id="calMonthLabel">Novembre 2025</span>
                <button id="calNextMonth" class="cal-nav">&gt;</button>
              </div>
              <div id="calMiniWeekdays" class="cal-mini-weekdays">
                <span>L</span><span>M</span><span>M</span><span>G</span><span>V</span><span>S</span><span>D</span>
              </div>
              <div id="calMiniGrid" class="cal-mini-grid">
                <!-- riempito da JS -->
              </div>
              <p class="cal-legend">
                <span class="cal-dot"></span> giorno con almeno un assente
              </p>
            </div>
          </div>
        </article>

        <!-- ARRIVI -->
        <article class="card card-arrivi">
          <div class="card-top-row">
            <div class="card-top-left">
              <div class="card-icon-circle">üöö</div>
              <h2 class="card-title">Arrivi</h2>
            </div>
            <button class="card-notif-badge" data-card="arrivi">
              <span class="badge-dot"></span>
              <span class="badge-count">0</span>
            </button>
          </div>
          <p class="card-text">
            Segnala arrivi di corrieri, espositori e materiale (demo).
          </p>
          <button id="btnVaiArrivi" class="btn-secondary">
            Vai alla sezione
          </button>
        </article>

        <!-- SCADENZE -->
        <article class="card card-scadenze">
          <div class="card-top-row">
            <div class="card-top-left">
              <div class="card-icon-circle">‚è≥</div>
              <h2 class="card-title">Scadenze</h2>
            </div>
            <button class="card-notif-badge" data-card="scadenze">
              <span class="badge-dot"></span>
              <span class="badge-count">0</span>
            </button>
          </div>
          <p class="card-text">
            Prodotti in scadenza (meno di 45 giorni).
          </p>
          <button id="btnVaiScadenze" class="btn-secondary">
            Vai alla sezione
          </button>
        </article>

        <!-- CONSUMABILI -->
        <article class="card card-consumabili">
          <div class="card-top-row">
            <div class="card-top-left">
              <div class="card-icon-circle">üì¶</div>
              <h2 class="card-title">Consumabili</h2>
            </div>
            <button class="card-notif-badge" data-card="consumabili">
              <span class="badge-dot"></span>
              <span class="badge-count">0</span>
            </button>
          </div>
          <p class="card-text">
            Caff√®, zucchero, carta igienica, rotoli POS, toner...
          </p>
          <button id="btnVaiConsumabili" class="btn-secondary">
            Vai alla sezione
          </button>
        </article>

        <!-- CAMBIO CASSA -->
        <article class="card card-cambio">
          <div class="card-top-row">
            <div class="card-top-left">
              <div class="card-icon-circle">üí∂</div>
              <h2 class="card-title">Cambio cassa</h2>
            </div>
            <button class="card-notif-badge" data-card="cambio">
              <span class="badge-dot"></span>
              <span class="badge-count">0</span>
            </button>
          </div>
          <p class="card-text">
            Segnala velocemente se servono spiccioli o tagli specifici.
          </p>
          <button id="btnVaiCambio" class="btn-secondary">
            Vai alla sezione
          </button>
        </article>

      </div>
    </section>
        <!-- ============ PAGINE INTERNE ============ -->

    <!-- PAGINA ASSENZE -->
    <section id="assenzePage" class="page hidden">
      <header class="page-header">
        <button class="back-button" data-back="dashboard">‚Üê Dashboard</button>
        <div class="page-title-block">
          <h1>Gestione assenze</h1>
          <p>Richieste, approvazioni e riepilogo.</p>
        </div>
      </header>

      <div class="page-content-grid">
        <!-- Per tutti: elenco assenze oggi e prossime -->
        <article class="card">
          <h2>Assenze oggi</h2>
          <ul id="pageAssentiOggi" class="assenze-list"></ul>
          <h2>Assenze prossimamente</h2>
          <ul id="pageAssentiProssimi" class="assenze-list"></ul>
        </article>

        <!-- Richiesta assenza (dipendente) -->
        <article id="boxRichiestaAssenza" class="card hidden">
          <h2>Richiedi assenza</h2>
          <form id="formRichiestaAssenza" class="simple-form">
            <div class="form-row">
              <label>Nome</label>
              <input type="text" id="assNome" />
            </div>
            <div class="form-row two-cols">
              <div>
                <label>Dal</label>
                <input type="date" id="assDal" />
              </div>
              <div>
                <label>Al</label>
                <input type="date" id="assAl" />
              </div>
            </div>
            <div class="form-row">
              <label>Motivo</label>
              <textarea id="assMotivo" rows="2"></textarea>
            </div>
            <button type="submit" class="btn-primary">Invia richiesta</button>
            <p id="assRichiestaFeedback" class="form-feedback hidden">
              ‚úÖ Richiesta inviata (demo).
            </p>
          </form>
        </article>

        <!-- Approvazione assenze (titolare) -->
        <article id="boxApprovazioneAssenze" class="card hidden">
          <h2>Richieste da approvare</h2>
          <div id="listaRichiesteAssenze" class="table-like small"></div>
        </article>
      </div>
    </section>

    <!-- PAGINA ARRIVI -->
    <section id="arriviPage" class="page hidden">
      <header class="page-header">
        <button class="back-button" data-back="dashboard">‚Üê Dashboard</button>
        <div class="page-title-block">
          <h1>Arrivi</h1>
          <p>Segnala arrivi di corrieri, espositori e materiale.</p>
        </div>
      </header>

      <div class="page-content-grid">
        <article class="card">
          <h2>Segnala arrivo</h2>
          <form id="formArrivo" class="simple-form">
            <div class="form-row">
              <label>Data</label>
              <input type="date" id="arrData" />
            </div>
            <div class="form-row">
              <label>Descrizione</label>
              <input type="text" id="arrDescrizione" placeholder="Es. Corriere ABC, espositore Vichy..." />
            </div>
            <div class="form-row">
              <label>Note</label>
              <textarea id="arrNote" rows="2"></textarea>
            </div>
            <button type="submit" class="btn-primary">Registra arrivo</button>
            <p id="arrivoFeedback" class="form-feedback hidden">
              ‚úÖ Arrivo registrato (demo).
            </p>
          </form>
        </article>

        <article class="card">
          <h2>Arrivi registrati</h2>
          <div id="listaArrivi" class="table-like small"></div>
        </article>
      </div>
    </section>

    <!-- PAGINA SCADENZE -->
    <section id="scadenzePage" class="page hidden">
      <header class="page-header">
        <button class="back-button" data-back="dashboard">‚Üê Dashboard</button>
        <div class="page-title-block">
          <h1>Scadenze</h1>
          <p>Prodotti in scadenza (meno di 45 giorni).</p>
        </div>
      </header>

      <div class="page-content-grid">
        <article class="card">
          <h2>Segnala scadenza</h2>
          <form id="formScadenza" class="simple-form">
            <div class="form-row">
              <label>Nome prodotto</label>
              <input type="text" id="scadNome" />
            </div>
            <div class="form-row two-cols">
              <div>
                <label>Numero pezzi</label>
                <input type="number" id="scadPezzi" min="1" />
              </div>
              <div>
                <label>Data scadenza</label>
                <input type="date" id="scadData" />
              </div>
            </div>
            <button type="submit" class="btn-primary">Registra scadenza</button>
            <p id="scadFeedback" class="form-feedback hidden">
              ‚úÖ Scadenza registrata (demo).
            </p>
          </form>
        </article>

        <article class="card">
          <h2>Elenco scadenze</h2>
          <div id="listaScadenze" class="table-like small"></div>
        </article>
      </div>
    </section>

    <!-- PAGINA CONSUMABILI -->
    <section id="consumabiliPage" class="page hidden">
      <header class="page-header">
        <button class="back-button" data-back="dashboard">‚Üê Dashboard</button>
        <div class="page-title-block">
          <h1>Consumabili</h1>
          <p>Segnala necessit√† di consumabili vari.</p>
        </div>
      </header>

      <div class="page-content-grid">
        <article class="card">
          <h2>Segnala consumabili</h2>
          <form id="formConsumabile" class="simple-form">
            <div class="form-row">
              <label>Nome prodotto</label>
              <input type="text" id="consNome" placeholder="Es. Caff√®, carta igienica, toner Brother..." />
            </div>
            <div class="form-row">
              <label>Note (opzionali)</label>
              <textarea id="consNote" rows="2"></textarea>
            </div>
            <button type="submit" class="btn-primary">Registra segnalazione</button>
            <p id="consFeedback" class="form-feedback hidden">
              ‚úÖ Segnalazione registrata (demo).
            </p>
          </form>
        </article>

        <article class="card">
          <h2>Segnalazioni consumabili</h2>
          <div id="listaConsumabili" class="table-like small"></div>
        </article>
      </div>
    </section>
        <!-- PAGINA CAMBIO CASSA -->
    <section id="cambioPage" class="page hidden">
      <header class="page-header">
        <button class="back-button" data-back="dashboard">‚Üê Dashboard</button>
        <div class="page-title-block">
          <h1>Cambio cassa</h1>
          <p>Segnala necessit√† di spiccioli o tagli specifici.</p>
        </div>
      </header>

      <article class="card">
        <h2>Segnala necessit√†</h2>
        <form id="formCambio" class="simple-form">
          <div class="form-row two-cols">
            <div>
              <label>Dettaglio richiesta</label>
              <input type="text" id="cambioDettaglio" placeholder="Es. servono 20 pezzi da 0,50‚Ç¨" />
            </div>
            <div>
              <label>Urgenza</label>
              <select id="cambioUrgenza">
                <option value="normale">Normale</option>
                <option value="alta">Alta</option>
              </select>
            </div>
          </div>
          <button type="submit" class="btn-primary">Invia segnalazione</button>
          <p id="cambioFeedback" class="form-feedback hidden">
            ‚úÖ Segnalazione inviata (demo).
          </p>
        </form>
      </article>

      <article class="card">
        <h2>Ultime segnalazioni</h2>
        <div id="listaCambio" class="table-like small"></div>
      </article>
    </section>

    <!-- OVERLAY NOTIFICHE GENERALE -->
    <div id="notifOverlay" class="notif-overlay hidden">
      <div class="notif-backdrop"></div>
      <div class="notif-modal">
        <button id="notifClose" class="notif-close" aria-label="Chiudi">‚úï</button>
        <h2 id="notifTitle">Notifiche</h2>
        <p id="notifIntro" class="notif-intro"></p>
        <div id="notifList" class="notif-list"></div>
        <div class="notif-footer">
          <button id="notifSegnaTutte" class="btn-secondary small">Segna tutte come lette</button>
          <button id="notifCloseBottom" class="btn-secondary small">Chiudi</button>
        </div>
      </div>
    </div>

  </main>
</body>
</html>
