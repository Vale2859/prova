<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Farmacia Montesano ‚Äì Portale Professionale</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="loading-bar" id="loadingBar"></div>

  <div class="app-shell">
    <!-- TOPBAR -->
    <header class="app-topbar">
      <div class="app-topbar-inner">
        <!-- LOGO -->
        <div class="app-logo-wrap">
          <div class="app-logo-circle">
            ‚öïÔ∏è
          </div>
          <div class="app-logo-text">
            <span class="app-logo-text-main">Farmacia Montesano</span>
            <span class="app-logo-text-sub">Portale Professionale</span>
          </div>
        </div>

        <!-- CENTRO: TITOLO DINAMICO -->
        <div class="app-topbar-center">
          <div class="app-topbar-page-title" id="topbarPageTitle">
            Benvenuto nel Portale Professionale
          </div>
        </div>

        <!-- DESTRA: UTENTE + LOGOUT + MENU MOBILE -->
        <div class="app-topbar-right">
          <div class="user-chip" id="userChip" style="display:none;">
            <div class="user-chip-avatar" id="userAvatar">
              U
            </div>
            <div class="user-chip-text">
              <span class="user-chip-name" id="userName">Utente</span>
              <span class="user-chip-role" id="userRoleLabel">Ruolo</span>
            </div>
          </div>
          <button class="btn-logout" id="btnLogout" style="display:none;">
            <span>Esci</span> ‚èè
          </button>
          <button class="btn-nav-toggle" id="btnNavToggle">
            ‚ò∞
          </button>
        </div>
      </div>
    </header>

    <!-- CONTENUTO PRINCIPALE -->
    <main class="app-main">
      <div class="app-main-inner">
        <!-- VIEW: LANDING -->
        <section id="view-landing" class="view active">
          <div class="landing-hero">
            <!-- Colonna sinistra -->
            <div>
              <div class="badge-pill">
                <span class="badge-dot"></span>
                Portale interno farmacia
              </div>

              <h1 class="landing-left-title">
                Tutta la <span class="highlight">gestione quotidiana</span> della Farmacia Montesano in un unico posto.
              </h1>

              <p class="landing-subtitle">
                Assenti, turni, comunicazioni, procedure, scadenze, scorte interne, cambio cassa e archivio file:
                tutto organizzato e accessibile in modo semplice per Titolari, Farmacia, Dipendenti e Clienti.
              </p>

              <div class="landing-actions">
                <button class="btn-primary" id="btnLandingLogin">
                  Accedi al portale
                </button>
                <button class="btn-secondary" id="btnLandingRegister">
                  Registrati
                </button>
                <button class="btn-soft">
                  Solo visualizzazione cliente
                </button>
              </div>

              <div class="landing-little-labels">
                <div class="little-label">Dati salvati localmente (browser)</div>
                <div class="little-label">Nessun server esterno</div>
                <div class="little-label">Ottimizzato per dispositivi mobili</div>
              </div>
            </div>

            <!-- Colonna destra: preview cards -->
            <div class="landing-preview">
              <div class="landing-blob"></div>
              <div class="landing-card-stack">
                <div class="landing-card-mini">
                  <div class="landing-card-icon">üìÜ</div>
                  <div>
                    <div class="landing-card-text-title">Assenti oggi</div>
                    <div class="landing-card-text-sub">Gestisci ferie, permessi e malattie</div>
                  </div>
                </div>
                <div class="landing-card-mini">
                  <div class="landing-card-icon">üíä</div>
                  <div>
                    <div class="landing-card-text-title">Scadenze e scorte</div>
                    <div class="landing-card-text-sub">Prodotti in esaurimento e in scadenza</div>
                  </div>
                </div>
                <div class="landing-card-mini">
                  <div class="landing-card-icon">üí¨</div>
                  <div>
                    <div class="landing-card-text-title">Comunicazioni interne</div>
                    <div class="landing-card-text-sub">Note rapide per tutto il team</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- VIEW: AUTH (LOGIN + REGISTRAZIONE) -->
        <section id="view-auth" class="view">
          <div class="auth-wrapper">
            <div class="auth-card">
              <div class="auth-header">
                <h2 class="auth-title">Accedi o registrati</h2>
                <p class="auth-subtitle">
                  Il portale distingue automaticamente Titolare, Farmacia, Dipendenti e Clienti in base al ruolo scelto.
                </p>
                <div class="auth-tabs">
                  <button
                    class="auth-tab-btn active"
                    data-tab-target="auth-login-form"
                    id="tabLogin"
                  >
                    Login
                  </button>
                  <button
                    class="auth-tab-btn"
                    data-tab-target="auth-register-form"
                    id="tabRegister"
                  >
                    Registrazione
                  </button>
                </div>
              </div>

              <div class="auth-body">
                <!-- FORM LOGIN -->
                <form id="auth-login-form" class="auth-form active">
                  <div class="form-row">
                    <label class="form-label" for="loginEmail">Email</label>
                    <input
                      type="email"
                      id="loginEmail"
                      class="form-input"
                      autocomplete="email"
                      placeholder="es. nome@farmaciamontesano.it"
                      required
                    />
                  </div>

                  <div class="form-row">
                    <label class="form-label" for="loginPassword">Password</label>
                    <input
                      type="password"
                      id="loginPassword"
                      class="form-input"
                      autocomplete="current-password"
                      required
                    />
                  </div>

                  <div class="auth-submit-row">
                    <button type="submit" class="btn-primary">
                      Entra nel portale
                    </button>
                  </div>

                  <div id="loginMessage" class="form-message hidden"></div>

                  <p class="auth-footer-note">
                    Non hai ancora un account? Passa alla scheda <strong>Registrazione</strong>.
                  </p>
                </form>

                <!-- FORM REGISTRAZIONE -->
                <form id="auth-register-form" class="auth-form">
                  <!-- Selettore ruolo -->
                  <div class="role-selector">
                    <button
                      type="button"
                      class="role-pill-btn active"
                      data-role="dipendente"
                    >
                      Dipendente
                    </button>
                    <button
                      type="button"
                      class="role-pill-btn"
                      data-role="farmacia"
                    >
                      Farmacia
                    </button>
                    <button
                      type="button"
                      class="role-pill-btn"
                      data-role="titolare"
                    >
                      Titolare
                    </button>
                    <button
                      type="button"
                      class="role-pill-btn"
                      data-role="cliente"
                    >
                      Cliente
                    </button>
                  </div>

                  <p class="role-summary" id="roleSummary">
                    Ruolo selezionato: <strong>Dipendente</strong> ‚Äì Accesso alla dashboard dipendenti.
                  </p>

                  <div class="form-row-two">
                    <div class="form-row">
                      <label class="form-label" for="regNome">Nome</label>
                      <input type="text" id="regNome" class="form-input" required />
                    </div>
                    <div class="form-row">
                      <label class="form-label" for="regCognome">Cognome</label>
                      <input type="text" id="regCognome" class="form-input" required />
                    </div>
                  </div>

                  <div class="form-row">
                    <label class="form-label" for="regEmail">Email</label>
                    <input
                      type="email"
                      id="regEmail"
                      class="form-input"
                      autocomplete="email"
                      required
                    />
                    <div class="form-hint">
                      Usa una mail che riconosci subito (per il login).
                    </div>
                  </div>

                  <div class="form-row">
                    <label class="form-label" for="regPassword">Password</label>
                    <input
                      type="password"
                      id="regPassword"
                      class="form-input"
                      autocomplete="new-password"
                      required
                    />
                    <div class="form-hint">
                      Minimo 6 caratteri. I dati restano salvati solo sul tuo dispositivo (localStorage).
                    </div>
                  </div>

                  <div class="form-row">
                    <label class="form-label" for="regNote">Note (facoltative)</label>
                    <textarea
                      id="regNote"
                      class="form-textarea"
                      rows="3"
                      placeholder="Reparto, orario prevalente, info utili‚Ä¶"
                    ></textarea>
                  </div>

                  <div class="auth-submit-row">
                    <button type="submit" class="btn-primary">
                      Crea account
                    </button>
                  </div>

                  <div id="registerMessage" class="form-message hidden"></div>
                </form>
              </div>
            </div>
          </div>
        </section>

        <!-- VIEW: DASHBOARD -->
        <section id="view-dashboard" class="view">
          <!-- Header sezione -->
          <div class="section-header">
            <div class="section-title-wrap">
              <div>
                <div class="section-kicker">Dashboard</div>
                <h2 class="section-title" id="dashboardTitle">
                  Benvenuto nel Portale
                </h2>
                <p class="section-subtitle" id="dashboardSubtitle">
                  Qui trovi la panoramica di oggi per la farmacia.
                </p>
              </div>
            </div>

            <div id="dashboardRolePill" class="role-pill-main role-dipendente">
              <span class="role-dot"></span>
              <span id="dashboardRoleText">Dipendente</span>
            </div>
          </div>

          <!-- Griglia cards principali -->
          <div class="dashboard-grid">
            <!-- Card Assenti -->
            <article class="card card-assenti" data-section-target="section-assenti">
              <div class="card-header">
                <div class="card-header-main">
                  <div class="card-icon-wrap">üìÜ</div>
                  <div class="card-title-wrap">
                    <div class="card-title">Assenti oggi</div>
                    <div class="card-subtitle">
                      Ferie, permessi, malattie del personale.
                    </div>
                  </div>
                </div>
                <span class="card-pill">Oggi</span>
              </div>
              <div class="card-body small-text">
                Visualizza chi √® assente oggi e aggiungi nuove assenze per ferie,
                permessi o malattia.
              </div>
              <div class="card-footer">
                <button class="card-link" type="button">
                  Apri sezione
                </button>
              </div>
            </article>

            <!-- Card Turni / Appoggio -->
            <article class="card card-turni" data-section-target="section-turni">
              <div class="card-header">
                <div class="card-header-main">
                  <div class="card-icon-wrap">üåô</div>
                  <div class="card-title-wrap">
                    <div class="card-title">Farmacia di turno</div>
                    <div class="card-subtitle">
                      Turno e farmacia di appoggio per oggi.
                    </div>
                  </div>
                </div>
                <span class="card-pill">Turno</span>
              </div>
              <div class="card-body small-text">
                Indica quale farmacia √® di turno e l‚Äôeventuale appoggio, con orari
                e recapiti.
              </div>
              <div class="card-footer">
                <button class="card-link" type="button">Apri sezione</button>
              </div>
            </article>

            <!-- Card Comunicazioni -->
            <article class="card card-comunicazioni" data-section-target="section-comunicazioni">
              <div class="card-header">
                <div class="card-header-main">
                  <div class="card-icon-wrap">üí¨</div>
                  <div class="card-title-wrap">
                    <div class="card-title">Comunicazioni interne</div>
                    <div class="card-subtitle">
                      Note per tutti, urgenti o informative.
                    </div>
                  </div>
                </div>
                <span class="card-pill">Team</span>
              </div>
              <div class="card-body small-text">
                Invia comunicazioni veloci al personale e tieni traccia delle note
                importanti.
              </div>
              <div class="card-footer">
                <button class="card-link" type="button">Apri sezione</button>
              </div>
            </article>

            <!-- Card Procedure -->
            <article class="card card-procedure" data-section-target="section-procedure">
              <div class="card-header">
                <div class="card-header-main">
                  <div class="card-icon-wrap">üìö</div>
                  <div class="card-title-wrap">
                    <div class="card-title">Procedure</div>
                    <div class="card-subtitle">
                      Come gestire le attivit√† pi√π frequenti.
                    </div>
                  </div>
                </div>
                <span class="card-pill">Standard</span>
              </div>
              <div class="card-body small-text">
                Raccolta di procedure operative: cambio cassa, resi, gestione
                scadenze, ecc.
              </div>
              <div class="card-footer">
                <button class="card-link" type="button">Apri sezione</button>
              </div>
            </article>

            <!-- Card Scadenze -->
            <article class="card card-scadenze" data-section-target="section-scadenze">
              <div class="card-header">
                <div class="card-header-main">
                  <div class="card-icon-wrap">‚è∞</div>
                  <div class="card-title-wrap">
                    <div class="card-title">Scadenze prodotti</div>
                    <div class="card-subtitle">
                      Prodotti entro 45 giorni evidenziati in rosso.
                    </div>
                  </div>
                </div>
                <span class="card-pill">Controllo</span>
              </div>
              <div class="card-body small-text">
                Inserisci i prodotti con scadenza e visualizza subito quelli
                a rischio.
              </div>
              <div class="card-footer">
                <button class="card-link" type="button">Apri sezione</button>
              </div>
            </article>

            <!-- Card Scorte/Cambio cassa/Archivio -->
            <article class="card card-cassa" data-section-target="section-cassa">
              <div class="card-header">
                <div class="card-header-main">
                  <div class="card-icon-wrap">üí∂</div>
                  <div class="card-title-wrap">
                    <div class="card-title">Cambio cassa</div>
                    <div class="card-subtitle">
                      Segnala i cambi cassa e vedi lo storico.
                    </div>
                  </div>
                </div>
                <span class="card-pill">Cassa</span>
              </div>
              <div class="card-body small-text">
                Registra rapidamente chi ha fatto il cambio e in quale turno.
              </div>
              <div class="card-footer">
                <button class="card-link" type="button">Apri sezione</button>
              </div>
            </article>
          </div>

          <!-- SEZIONI DETTAGLIO (placeholder pronti per essere popolati) -->

          <!-- ASSENTI -->
          <section id="section-assenti" class="page-section mt-12">
            <div class="page-section-header">
              <div>
                <h3 class="page-section-title">Assenti oggi</h3>
                <p class="page-section-subtitle">
                  Elenco assenze giornaliere: ferie, permessi e malattie.
                </p>
              </div>
            </div>
            <div class="assenti-layout">
              <div>
                <div class="assenti-mini-grid">
                  <div class="assenti-mini-card">
                    <div class="assenti-mini-label">Totale assenze registrate</div>
                    <div class="assenti-mini-number" id="assentiTotali">0</div>
                    <div class="assenti-mini-caption">Storico complessivo</div>
                  </div>
                  <div class="assenti-mini-card">
                    <div class="assenti-mini-label">Oggi</div>
                    <div class="assenti-mini-number" id="assentiOggi">0</div>
                    <div class="assenti-mini-caption">Assenze per la data odierna</div>
                  </div>
                  <div class="assenti-mini-card">
                    <div class="assenti-mini-label">Ferie attive</div>
                    <div class="assenti-mini-number" id="assentiFerie">0</div>
                    <div class="assenti-mini-caption">Periodi ferie in corso</div>
                  </div>
                </div>

                <div class="assenti-list scroll-y-soft" id="assentiList">
                  <div class="table-empty">Nessuna assenza inserita.</div>
                </div>
              </div>

              <div>
                <div class="assenti-note-box">
                  Usa questo box per inserire nuove assenze
                  (dipendenti, collaboratori, ecc.). I dati vengono salvati nel
                  browser (localStorage) e sono visibili solo su questo
                  dispositivo.
                </div>

                <form id="assentiForm" class="assenti-form mt-8">
                  <div class="form-row">
                    <label class="form-label" for="assenteNome">Nome</label>
                    <input type="text" id="assenteNome" class="form-input" required />
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="assenteData">Data</label>
                    <input type="date" id="assenteData" class="form-input" required />
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="assenteTipo">Tipo assenza</label>
                    <select id="assenteTipo" class="form-select" required>
                      <option value="ferie">Ferie</option>
                      <option value="permesso">Permesso</option>
                      <option value="malattia">Malattia</option>
                    </select>
                  </div>
                  <div class="form-row form-group-full">
                    <label class="form-label" for="assenteNote">Note</label>
                    <textarea
                      id="assenteNote"
                      class="form-textarea"
                      placeholder="Motivo, turno, ecc."
                    ></textarea>
                  </div>
                  <div class="form-row form-group-full">
                    <button type="submit" class="btn-primary small">
                      Aggiungi assenza
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </section>

          <!-- TURNI -->
          <section id="section-turni" class="page-section mt-12">
            <div class="page-section-header">
              <div>
                <h3 class="page-section-title">Farmacia di turno / appoggio</h3>
                <p class="page-section-subtitle">
                  Informazioni per il pubblico e per il team interno.
                </p>
              </div>
            </div>

            <div class="turni-layout">
              <div class="turno-box" id="turnoBox">
                <div class="turno-row">
                  <div class="turno-label">Data</div>
                  <div class="turno-content" id="turnoData">
                    Nessun turno impostato.
                  </div>
                </div>
                <div class="turno-row">
                  <div class="turno-label">Farmacia di turno</div>
                  <div class="turno-content" id="turnoFarmacia">
                    ‚Äì
                  </div>
                </div>
                <div class="turno-row">
                  <div class="turno-label">Orari</div>
                  <div class="turno-content" id="turnoOrari">
                    ‚Äì
                  </div>
                </div>
                <div class="turno-row">
                  <div class="turno-label">Appoggio</div>
                  <div class="turno-content" id="turnoAppoggio">
                    Nessuna farmacia di appoggio impostata.
                  </div>
                </div>
              </div>

              <div class="turno-edit-box">
                <div class="turno-edit-title">Aggiorna informazioni turno</div>
                <p class="small-text mb-8">
                  Questi dati vengono salvati in locale e mostrati anche nella
                  dashboard cliente (se la implementi).
                </p>
                <form id="turniForm" class="turno-edit-grid">
                  <div class="form-row">
                    <label class="form-label" for="turnoDataInput">Data</label>
                    <input type="date" id="turnoDataInput" class="form-input" required />
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="turnoFarmaciaInput">Farmacia di turno</label>
                    <input
                      type="text"
                      id="turnoFarmaciaInput"
                      class="form-input"
                      placeholder="Es. Farmacia Montesano"
                      required
                    />
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="turnoOrariInput">Orari</label>
                    <input
                      type="text"
                      id="turnoOrariInput"
                      class="form-input"
                      placeholder="Es. 9:00‚Äì13:00 / 16:30‚Äì20:30"
                    />
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="turnoAppoggioInput">Farmacia di appoggio</label>
                    <input
                      type="text"
                      id="turnoAppoggioInput"
                      class="form-input"
                      placeholder="Facoltativo"
                    />
                  </div>
                  <div class="form-row form-group-full mt-4">
                    <button type="submit" class="btn-primary small">
                      Salva turno
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </section>

          <!-- COMUNICAZIONI -->
          <section id="section-comunicazioni" class="page-section mt-12">
            <div class="page-section-header">
              <div>
                <h3 class="page-section-title">Comunicazioni interne</h3>
                <p class="page-section-subtitle">
                  Messaggi urgenti, importanti o informativi per il personale.
                </p>
              </div>
            </div>

            <div class="comunicazioni-layout">
              <div>
                <div class="com-filters">
                  <span class="com-badge-counter" id="comCounter">0 comunicazioni</span>
                </div>
                <div id="comList" class="comunicazioni-list">
                  <!-- Popolata da JS -->
                </div>
              </div>

              <div class="com-form-box">
                <div class="com-form-title">Nuova comunicazione</div>
                <div class="com-form-help">
                  Scegli la categoria per evidenziare il livello di attenzione.
                </div>

                <form id="comForm">
                  <div class="form-row">
                    <label class="form-label" for="comCategoria">Categoria</label>
                    <select id="comCategoria" class="form-select">
                      <option value="informativa">Informativa</option>
                      <option value="importante">Importante</option>
                      <option value="urgente">Urgente</option>
                    </select>
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="comTitolo">Titolo</label>
                    <input type="text" id="comTitolo" class="form-input" required />
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="comTesto">Testo</label>
                    <textarea
                      id="comTesto"
                      class="form-textarea"
                      rows="3"
                      required
                    ></textarea>
                  </div>
                  <div class="form-row">
                    <label class="form-label" for="comAutore">Autore</label>
                    <input
                      type="text"
                      id="comAutore"
                      class="form-input"
                      placeholder="Facoltativo, predefinito: utente loggato"
                    />
                  </div>
                  <div class="form-row mt-4">
                    <button type="submit" class="btn-primary small">
                      Pubblica comunicazione
                    </button>
                  </div>
                  <div id="comFeedback" class="form-feedback"></div>
                </form>
              </div>
            </div>
          </section>

          <!-- PROCEDURE -->
          <section id="section-procedure" class="page-section mt-12">
            <div class="page-section-header">
              <div>
                <h3 class="page-section-title">Procedure operative</h3>
                <p class="page-section-subtitle">
                  Raccolta delle procedure interne: utili per dipendenti e titolari.
                </p>
              </div>
            </div>

            <div class="procedure-layout">
              <div>
                <div class="procedure-filters-bar">
                  <button class="btn-pill-filter active" data-proc-filter="tutte">
                    Tutte
                  </button>
                  <button class="btn-pill-filter" data-proc-filter="cassa">
                    Cassa
                  </button>
                  <button class="btn-pill-filter" data-proc-filter="magazzino">
                    Magazzino
                  </button>
                  <button class="btn-pill-filter" data-proc-filter="servizi">
                    Servizi
                  </button>
                </div>

                <div id="procedureList" class="procedure-list">
                  <!-- Popolata da JS -->
                </div>
              </div>

              <div id="procedureDetail" class="procedure-detail">
                <h3>Nessuna procedura selezionata</h3>
                <p class="procedure-empty">
                  Seleziona una procedura a sinistra per leggerne il contenuto.
                </p>
              </div>
            </div>
          </section>

          <!-- SCADENZE + SCORTE + CASSA + ARCHIVIO: li lascio come struttura base, pronti per essere popolati
               (se vuoi poi ti scrivo anche tutta la logica JS per questi, ma il file sarebbe lunghissimo).
               Le classi CSS sono gi√† collegate: puoi inserirci tabelle e contenuti come preferisci. -->
        </section>
      </div>
    </main>
  </div>

  <!-- Container TOAST -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Overlay generico (per usi futuri) -->
  <div class="overlay hidden" id="genericOverlay">
    <div class="overlay-panel">
      <div class="overlay-header">
        <div class="overlay-title" id="overlayTitle">Titolo overlay</div>
        <button class="overlay-close-btn" id="overlayCloseBtn">Chiudi</button>
      </div>
      <div class="overlay-body" id="overlayBody">
        Contenuto‚Ä¶
      </div>
      <div class="overlay-footer">
        <button class="btn-secondary" id="overlayCancelBtn">Chiudi</button>
      </div>
    </div>
  </div>

  <script src="script.js" defer></script>
</body>
</html>
