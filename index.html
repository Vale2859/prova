<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Portale Farmacia Montesano ‚Äì Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-shell">

    <!-- ======================
         TOP BAR
         ====================== -->
    <header class="topbar">
      <button class="topbar-hamburger" aria-label="Menu">
        ‚ò∞
      </button>
      <div class="topbar-center">
        <span class="topbar-logo-text">PORTALE FARMACIA MONTESANO</span>
        <span class="topbar-subtitle">Dashboard principale</span>
      </div>
      <div class="topbar-date" id="topbar-date"></div>
    </header>

    <!-- ======================
         VISTA MOBILE (CARD)
         ====================== -->
    <div class="mobile-dashboard">
      <header class="m-header">
        <div class="m-logo-wrap">
          <img src="logo.jpg" alt="Farmacia Montesano" class="m-logo" />
        </div>
        <button class="m-hamburger" aria-label="Menu">
          <span></span>
        </button>
      </header>

      <main class="m-main">
        <section class="m-card-grid">

          <!-- RIGA 1 -->
          <button class="m-card m-card-green">
            <div class="m-card-label">NUOVI</div>
            <div class="m-card-title">Assenti / Permessi</div>
            <div class="m-card-badge">2</div>
            <div class="m-card-icon">üìÖ</div>
          </button>

          <button class="m-card m-card-blue">
            <div class="m-card-label">NUOVO</div>
            <div class="m-card-title">Farmacia di turno</div>
            <div class="m-card-badge">1</div>
            <div class="m-card-icon">‚è∞</div>
          </button>

          <!-- RIGA 2 -->
          <button class="m-card m-card-pink">
            <div class="m-card-label">NUOVA</div>
            <div class="m-card-title">Comunicazioni</div>
            <div class="m-card-badge">1</div>
            <div class="m-card-icon">üì¢</div>
          </button>

          <button class="m-card m-card-teal">
            <div class="m-card-label">NUOVE</div>
            <div class="m-card-title">Procedure</div>
            <div class="m-card-icon">üìö</div>
          </button>

          <!-- RIGA 3 -->
          <button class="m-card m-card-yellow">
            <div class="m-card-label">NUOVO</div>
            <div class="m-card-title">Logistica</div>
            <div class="m-card-badge">1</div>
            <div class="m-card-icon">üì¶</div>
          </button>

          <button class="m-card m-card-cyan">
            <div class="m-card-label">NUOVO</div>
            <div class="m-card-title">Magazziniera</div>
            <div class="m-card-badge">2</div>
            <div class="m-card-icon">üìã</div>
          </button>

          <!-- RIGA 4 -->
          <button class="m-card m-card-orange">
            <div class="m-card-label">NUOVI</div>
            <div class="m-card-title">Prodotti in scadenza</div>
            <div class="m-card-icon">‚è≥</div>
          </button>

          <button class="m-card m-card-green2">
            <div class="m-card-label">NUOVO</div>
            <div class="m-card-title">Consumabili</div>
            <div class="m-card-icon">üß™</div>
          </button>

          <!-- RIGA 5 -->
          <button class="m-card m-card-blue2">
            <div class="m-card-label">NUOVO</div>
            <div class="m-card-title">Consegne / Ritiri</div>
            <div class="m-card-icon">üöö</div>
          </button>

          <button class="m-card m-card-purple">
            <div class="m-card-label">NUOVO</div>
            <div class="m-card-title">Cambio cassa</div>
            <div class="m-card-icon">üí∂</div>
          </button>

          <!-- RIGA 6 -->
          <button class="m-card m-card-dark m-card-wide">
            <div class="m-card-title">Archivio file</div>
            <div class="m-card-icon">üóÑÔ∏è</div>
          </button>

        </section>
      </main>
    </div>

    <!-- ======================
         VISTA DESKTOP (4 QUADRANTI)
         ====================== -->
    <div class="desktop-dashboard">
      <main class="desktop-grid">

        <!-- Q1 ‚Äì SEZIONI FARMACIA -->
        <section class="panel panel-q1">
          <h2 class="panel-title">SEZIONI FARMACIA</h2>
          <p class="panel-subtitle">Accesso rapido alle aree operative.</p>

          <div class="q1-card-grid">
            <button class="q1-card card-assenti" data-section="assenti">
              <span>Assenti / Permessi</span>
            </button>
            <button class="q1-card card-turno" data-section="turno">
              <span>Farmacia di turno</span>
            </button>
            <button class="q1-card card-comunicazioni" data-section="comunicazioni">
              <span>Comunicazioni</span>
            </button>

            <button class="q1-card card-procedure" data-section="procedure">
              <span>Procedure</span>
            </button>
            <button class="q1-card card-logistica" data-section="logistica">
              <span>Logistica</span>
            </button>
            <button class="q1-card card-magazzino" data-section="magazzino">
              <span>Magazziniera</span>
            </button>

            <button class="q1-card card-scadenze" data-section="scadenze">
              <span>Prodotti in scadenza</span>
            </button>
            <button class="q1-card card-consumabili" data-section="consumabili">
              <span>Consumabili</span>
            </button>
            <button class="q1-card card-archivio" data-section="archivio">
              <span>Archivio file</span>
            </button>
          </div>
        </section>

        <!-- Q2 ‚Äì PROMOZIONI & GIORNATE -->
        <section class="panel panel-q2">
          <h2 class="panel-title">PROMOZIONI &amp; GIORNATE IN FARMACIA</h2>
          <p class="panel-subtitle">Cosa stiamo offrendo e cosa c‚Äô√® in programma.</p>

          <div class="q2-columns">

            <!-- OFFERTE -->
            <div class="q2-column">
              <div class="q2-column-header">
                <span>Offerte in corso</span>
                <button class="pill-btn" onclick="openPromoPopup('promo')">+ Aggiungi</button>
              </div>
              <ul id="promoList" class="promo-list">
                <!-- Popolato da JS -->
              </ul>
            </div>

            <!-- GIORNATE -->
            <div class="q2-column">
              <div class="q2-column-header">
                <span>Giornate in farmacia</span>
                <button class="pill-btn" onclick="openPromoPopup('giornata')">+ Aggiungi</button>
              </div>
              <ul id="giornateList" class="promo-list">
                <!-- Popolato da JS -->
              </ul>
            </div>

          </div>
        </section>

        <!-- Q3 ‚Äì AREA CONTENUTI -->
        <section class="panel panel-q3">
          <h2 class="panel-title">AREA CONTENUTI</h2>
          <p class="panel-subtitle">
            Seleziona una funzione dalle card: qui vedrai solo ci√≤ che ti interessa davvero
            (assenze approvate, turno di oggi, comunicazioni, scadenze, consegne, giornate in farmacia, ecc.).
          </p>

          <div id="contentArea" class="content-area">
            <p class="content-placeholder">
              Tocca una card a sinistra o una voce in basso per caricare il contenuto qui.
            </p>
          </div>

          <!-- overlay che appare dopo inattivit√† -->
          <div id="contentIdleOverlay" class="content-idle hidden">
            <div class="idle-inner">
              <h3>Panoramica rapida</h3>
              <p>
                Nessuna azione recente. Qui potrai vedere a colpo d‚Äôocchio:
                assenze del giorno, turni, promozioni attive e giornate in programma.
              </p>
              <ul id="idleSummaryList"></ul>
            </div>
          </div>
        </section>

        <!-- Q4 ‚Äì AGENDA SERVIZI -->
        <section class="panel panel-q4">
          <h2 class="panel-title">AGENDA SERVIZI</h2>
          <p class="panel-subtitle">Gestione appuntamenti, servizi ed esami.</p>

          <div class="agenda-header">
            <div class="agenda-month-nav">
              <button class="circle-btn" id="monthPrevBtn">‚óÄ</button>
              <span id="agendaMonthLabel"></span>
              <button class="circle-btn" id="monthNextBtn">‚ñ∂</button>
            </div>
            <button class="pill-btn" id="newAppointmentBtn">+ Nuovo appuntamento</button>
          </div>

          <!-- Vista MENSILE -->
          <div id="agendaMonthView" class="agenda-month-view">
            <!-- Popolata da JS -->
          </div>

          <!-- Vista GIORNALIERA -->
          <div id="agendaDayView" class="agenda-day-view hidden">
            <div class="agenda-day-header">
              <button class="circle-btn" id="backToMonthBtn">‚óÄ Mese</button>
              <span id="agendaDayLabel"></span>
            </div>
            <div class="agenda-day-slots" id="agendaDaySlots">
              <!-- slot orari -->
            </div>
          </div>
        </section>

      </main>

      <!-- Pulsante WhatsApp -->
      <button class="fab-whatsapp" onclick="openWhatsApp()" aria-label="Apri WhatsApp farmacia">
        üí¨
      </button>
    </div>

    <!-- ======================
         POPUP: AGGIUNTA PROMO / GIORNATA
         ====================== -->
    <div id="promoPopup" class="modal hidden">
      <div class="modal-dialog">
        <div class="modal-header">
          <h3 id="promoPopupTitle">Nuova voce</h3>
          <button class="modal-close" onclick="closePromoPopup()">‚úï</button>
        </div>
        <div class="modal-body">
          <label class="field-label">
            Tipo
            <select id="promoTypeSelect">
              <option value="promo">Offerta in corso</option>
              <option value="giornata">Giornata in farmacia</option>
            </select>
          </label>

          <label class="field-label">
            Titolo
            <input id="promoTitleInput" type="text" placeholder="Es. Promo colesterolo" />
          </label>

          <label class="field-label">
            Descrizione
            <textarea id="promoDescInput" rows="3" placeholder="Dettagli sintetici..."></textarea>
          </label>

          <label class="field-label">
            Data
            <input id="promoDateInput" type="date" />
          </label>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closePromoPopup()">Annulla</button>
          <button class="btn-primary" onclick="savePromo()">Salva</button>
        </div>
      </div>
    </div>

    <!-- ======================
         POPUP: NUOVO APPUNTAMENTO
         ====================== -->
    <div id="appointmentPopup" class="modal hidden">
      <div class="modal-dialog">
        <div class="modal-header">
          <h3>Nuovo appuntamento</h3>
          <button class="modal-close" onclick="closeAppointmentPopup()">‚úï</button>
        </div>
        <div class="modal-body">
          <label class="field-label">
            Data
            <input id="apptDateInput" type="date" />
          </label>

          <label class="field-label">
            Orario (inizio - fine)
            <div class="time-row">
              <input id="apptStartInput" type="time" />
              <span>-</span>
              <input id="apptEndInput" type="time" />
            </div>
          </label>

          <label class="field-label">
            Nome e cognome
            <input id="apptNameInput" type="text" placeholder="Es. Rossi Maria" />
          </label>

          <label class="field-label">
            Servizio / motivo
            <input id="apptReasonInput" type="text" placeholder="Es. ECG, Holter, consulenza..." />
          </label>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeAppointmentPopup()">Annulla</button>
          <button class="btn-primary" onclick="saveAppointment()">Salva</button>
        </div>
      </div>
    </div>

  </div>

  <script src="script.js"></script>
</body>
</html>
