<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portale Farmacia Montesano</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- ============================================================
     LOGIN PAGE
=============================================================== -->
<div id="authContainer" class="auth-container">

    <div class="auth-box">

        <h1 class="auth-title">Portale Farmacia Montesano</h1>

        <div class="auth-tabs">
            <button class="auth-tab active" data-role="farmacia">Farmacia</button>
            <button class="auth-tab" data-role="dipendente">Dipendente</button>
            <button class="auth-tab" data-role="titolare">Titolare</button>
            <!-- L'Admin NON compare qui -->
        </div>

        <form id="loginForm" class="auth-form">

            <label class="auth-label">Accesso come:  
                <span id="loginRoleLabel">Farmacia</span>
            </label>

            <input type="password" id="loginPassword"
                   placeholder="Inserisci password"
                   class="auth-input">

            <button type="submit" class="auth-btn">Accedi</button>

        </form>

        <p class="auth-info">Accesso riservato al personale interno</p>

    </div>

</div>

<!-- ============================================================
     APP CONTAINER (VISIBILE DOPO LOGIN)
=============================================================== -->
<div id="app" class="app hidden">

    <!-- ===========================
         HEADER
    ============================ -->
    <header class="app-header">

        <!-- LOGO CON ID = "logo" NECESSARIO PER 5 TAP ADMIN -->
        <div id="logo" class="header-logo">
            <img src="logo.png" alt="Farmacia Montesano">
        </div>

        <div class="header-role">
            <span id="currentRolePill">Ruolo</span>
        </div>

        <button id="hamburger" class="hamburger-btn">‚ò∞</button>

    </header>

    <!-- ===========================
         SIDEBAR
    ============================ -->
    <aside id="sidebar" class="sidebar">

        <button id="closeSidebar" class="sidebar-close">‚úï</button>

        <ul class="sidebar-menu">

            <li data-nav="dashboard">üè† Dashboard</li>
            <li data-nav="assenzePage">üü¶ Assenze personale</li>
            <li data-nav="turniPage">üü© Turni farmacia</li>
            <li data-nav="comunicazioniPage">üüß Comunicazioni</li>
            <li data-nav="procedurePage">üü™ Procedure</li>
            <li data-nav="archivioPage">üìÅ Archivio file</li>

            <!-- ‚ö†Ô∏è L‚ÄôAdmin segreto NON √® presente nella sidebar -->

        </ul>

        <button id="logoutBtn" class="logout-btn">Logout</button>

    </aside>

    <!-- ===========================
         PAGINE (SHOW/HIDE)
    ============================ -->

    <!-- DASHBOARD -->
    <section id="dashboard" class="page-section">

        <h2 class="page-title">Dashboard</h2>

        <div class="dashboard-grid">

            <!-- NOTIFICHE -->
            <div id="openNotifiche" class="dash-card">
                <div class="dash-icon">üîî</div>
                <div class="dash-title">Notifiche</div>
                <div class="dash-sub">Pallini + avvisi</div>
            </div>

            <!-- ASSENZE -->
            <div id="openAssenze" class="dash-card">
                <div class="dash-icon">üßë‚Äç‚öïÔ∏è</div>
                <div class="dash-title">Assenze</div>
                <div class="dash-sub">Richieste e storico</div>
            </div>

            <!-- TURNI -->
            <div id="openTurni" class="dash-card">
                <div class="dash-icon">üóìÔ∏è</div>
                <div class="dash-title">Turni</div>
                <div class="dash-sub">Oggi ‚Ä¢ Settimana ‚Ä¢ Mese</div>
            </div>

            <!-- COMUNICAZIONI -->
            <div id="openComunicazioni" class="dash-card">
                <div class="dash-icon">üì¢</div>
                <div class="dash-title">Comunicazioni</div>
                <div class="dash-sub">Messaggi interni</div>
            </div>

            <!-- PROCEDURE -->
            <div id="openProcedure" class="dash-card">
                <div class="dash-icon">üìÑ</div>
                <div class="dash-title">Procedure</div>
                <div class="dash-sub">Documenti operativi</div>
            </div>

            <!-- ARCHIVIO FILE -->
            <div id="openArchivio" class="dash-card">
                <div class="dash-icon">üìÅ</div>
                <div class="dash-title">Archivio File</div>
                <div class="dash-sub">Carica ‚Ä¢ Crea ‚Ä¢ Modifica</div>
            </div>

        </div>

    </section>
        <!-- ============================================================
         PAGINA ASSENZE
    =============================================================== -->
    <section id="assenzePage" class="page-section hidden">

        <button id="backFromAssenze" class="back-btn">‚Üê Torna indietro</button>
        <h2 class="page-title">Assenze del personale</h2>

        <form class="assenze-form">

            <label>Tipo richiesta:</label>
            <select class="assenze-input">
                <option>Permesso</option>
                <option>Ferie</option>
                <option>Malattia</option>
            </select>

            <label>Data:</label>
            <input type="date" class="assenze-input">

            <label>Note:</label>
            <textarea class="assenze-input"></textarea>

            <button type="submit" class="primary-btn">Invia richiesta</button>
        </form>

        <div id="assenzeFeedback" class="feedback success hidden">
            Richiesta inviata con successo!
        </div>

    </section>


    <!-- ============================================================
         PAGINA TURNI
    =============================================================== -->
    <section id="turniPage" class="page-section hidden">

        <button id="backFromTurni" class="back-btn">‚Üê Torna indietro</button>
        <h2 class="page-title">Turni delle Farmacie</h2>

        <div class="turni-tabs">
            <button class="turni-tab active" data-view="oggi">Oggi</button>
            <button class="turni-tab" data-view="settimana">Settimana</button>
            <button class="turni-tab" data-view="mese">Mese</button>
        </div>

        <div class="turni-filters">
            <select id="turniMeseSelect">
                <option value="all">Tutti i mesi</option>
                <option value="1">Gennaio</option>
                <option value="2">Febbraio</option>
                <option value="12">Dicembre</option>
            </select>

            <select id="turniFarmaciaSelect">
                <option value="all">Tutte le farmacie</option>
                <option value="Farmacia Montesano">Farmacia Montesano</option>
                <option value="Farmacia Centrale">Farmacia Centrale</option>
                <option value="Farmacia Madonna delle Grazie">Farmacia Madonna delle Grazie</option>
            </select>
        </div>

        <div id="turniRows" class="turni-table"></div>

    </section>


    <!-- ============================================================
         PAGINA COMUNICAZIONI
    =============================================================== -->
    <section id="comunicazioniPage" class="page-section hidden">

        <button id="backFromComunicazioni" class="back-btn">‚Üê Torna indietro</button>
        <h2 class="page-title">Comunicazioni interne</h2>

        <div class="com-filters">
            <select id="filtroCategoria">
                <option value="tutte">Tutte</option>
                <option value="urgente">Urgenti</option>
                <option value="importante">Importanti</option>
                <option value="informativa">Informative</option>
            </select>

            <label class="checkbox-row">
                <input type="checkbox" id="filtroSoloNonLette">
                Solo non lette
            </label>
        </div>

        <div id="comunicazioniList" class="com-list"></div>

        <h3 class="form-title">Nuova comunicazione</h3>

        <form id="comunicazioneForm" class="com-form">

            <label>Titolo:</label>
            <input type="text" id="comTitolo" class="com-input">

            <label>Categoria:</label>
            <select id="comCategoria" class="com-input">
                <option value="urgente">Urgente</option>
                <option value="importante">Importante</option>
                <option value="informativa">Informativa</option>
            </select>

            <label>Testo:</label>
            <textarea id="comTesto" class="com-input"></textarea>

            <button class="primary-btn">Invia comunicazione</button>
        </form>

        <div id="comunicazioneFeedback" class="feedback hidden"></div>

        <div class="com-badges">
            <span id="badgeTotComunicazioni" class="com-badge"></span>
            <span id="badgeNonLette" class="com-badge"></span>
            <span id="badgeUrgenti" class="com-badge"></span>
        </div>

    </section>


    <!-- ============================================================
         PAGINA PROCEDURE
    =============================================================== -->
    <section id="procedurePage" class="page-section hidden">

        <button id="backFromProcedure" class="back-btn">‚Üê Torna indietro</button>
        <h2 class="page-title">Procedure Operative</h2>

        <input id="procedureSearch" class="proc-search"
               placeholder="Cerca procedure...">

        <div class="proc-filter-row">
            <button class="proc-filter-btn active" data-reparto="tutti">Tutti</button>
            <button class="proc-filter-btn" data-reparto="cassa">Cassa</button>
            <button class="proc-filter-btn" data-reparto="magazzino">Magazzino</button>
            <button class="proc-filter-btn" data-reparto="servizi">Servizi</button>
            <button class="proc-filter-btn" data-reparto="logistica">Logistica</button>
        </div>

        <div id="procedureList" class="proc-list"></div>

        <div id="procedureDetail" class="proc-detail">
            <p class="small-text muted">Seleziona una procedura per visualizzarla.</p>
        </div>

    </section>
        <!-- ============================================================
         PAGINA ARCHIVIO FILE
    =============================================================== -->
    <section id="archivioPage" class="page-section hidden">

        <button id="backFromArchivio" class="back-btn">‚Üê Torna indietro</button>
        <h2 class="page-title">Archivio File</h2>

        <div class="archivio-toolbar">

            <span id="archivioPath" class="archivio-path">/root</span>

            <div class="archivio-tools">

                <button id="archivioUp" class="archivio-btn">üîº Su</button>

                <button id="archivioNewFolder" class="archivio-btn">
                    üìÅ Nuova cartella
                </button>

                <input type="file" id="archivioUpload" class="hidden" multiple>
                <button id="archivioBtnUpload" class="archivio-btn">
                    ‚¨Ü Carica file
                </button>

            </div>

        </div>

        <div id="archivioGrid" class="archivio-grid"></div>

        <!-- MEN√ô TASTO DESTRO -->
        <div id="archivioContextMenu" class="context-menu hidden">
            <div id="menuNuova" class="context-item">üìÅ Nuova cartella</div>
            <div id="menuRinomina" class="context-item">‚úè Rinomina</div>
            <div id="menuElimina" class="context-item">üóë Elimina</div>
            <div id="menuCopia" class="context-item">üìÑ Copia</div>
            <div id="menuIncolla" class="context-item">üìã Incolla</div>
            <div id="menuDownload" class="context-item">‚¨á Download</div>
        </div>

    </section>


    <!-- ============================================================
         PAGINA TITOLARE (Dashboard avanzata per pap√†)
    =============================================================== -->
    <section id="titolarePage" class="page-section hidden">

        <button id="backFromTitolare" class="back-btn">‚Üê Torna indietro</button>

        <h2 class="page-title">Area Titolare</h2>
        <p class="titolare-desc">
            Accesso semplificato per il Titolare ‚Äî caratteri grandi, colori chiari,
            funzioni principali sempre visibili.
        </p>

        <div class="titolare-grid">

            <div class="titolare-card" data-titolare="notifiche">
                <span class="titolare-icon">üîî</span>
                <span class="titolare-title">Notifiche</span>
                <span class="titolare-sub">Avvisi importanti</span>
            </div>

            <div class="titolare-card" data-titolare="assenze">
                <span class="titolare-icon">üßë‚Äç‚öïÔ∏è</span>
                <span class="titolare-title">Assenze</span>
                <span class="titolare-sub">Gestione veloce</span>
            </div>

            <div class="titolare-card" data-titolare="messaggi">
                <span class="titolare-icon">üí¨</span>
                <span class="titolare-title">Messaggi</span>
                <span class="titolare-sub">Dipendenti / famiglia</span>
            </div>

            <div class="titolare-card" data-titolare="promozioni">
                <span class="titolare-icon">üè∑Ô∏è</span>
                <span class="titolare-title">Promozioni</span>
                <span class="titolare-sub">Sconti attivi</span>
            </div>

            <div class="titolare-card" data-titolare="logistica">
                <span class="titolare-icon">üì¶</span>
                <span class="titolare-title">Logistica</span>
                <span class="titolare-sub">Consegne & resi</span>
            </div>

            <div class="titolare-card" data-titolare="comunicazioni">
                <span class="titolare-icon">üì¢</span>
                <span class="titolare-title">Comunicazioni</span>
                <span class="titolare-sub">Note interne</span>
            </div>

            <div class="titolare-card" data-titolare="procedure">
                <span class="titolare-icon">üìÑ</span>
                <span class="titolare-title">Procedure</span>
                <span class="titolare-sub">Chiaro e grande</span>
            </div>

            <div class="titolare-card" data-titolare="archivio">
                <span class="titolare-icon">üìÅ</span>
                <span class="titolare-title">Archivio</span>
                <span class="titolare-sub">File importanti</span>
            </div>

        </div>

    </section>



    <!-- ============================================================
         PAGINA ADMIN SEGRETA (si apre con 5 tap sul logo)
    =============================================================== -->
    <section id="adminPage" class="page-section hidden">

        <button id="backFromAdmin" class="back-btn">‚Üê Torna alla dashboard</button>

        <h2 class="page-title">Pannello Admin Segreto</h2>
        <p class="admin-desc">
            Accesso riservato al proprietario. Da qui controlli tutto il portale.
        </p>

        <div class="admin-tabs">
            <button class="admin-tab active" data-admin="moduli">Moduli</button>
            <button class="admin-tab" data-admin="visibilita">Visibilit√†</button>
            <button class="admin-tab" data-admin="notifiche">Notifiche</button>
            <button class="admin-tab" data-admin="impostazioni">Impostazioni</button>
            <button class="admin-tab" data-admin="manutenzione">Manutenzione</button>
        </div>

        <div id="adminContent" class="admin-content">
            <!-- Verr√† riempito via JS -->
        </div>

    </section>
        <!-- ============================================================
         CONTENUTI ADMIN SEGRETI (TABS)
         Verranno mostrati dentro #adminContent
    =============================================================== -->

    <!-- ========== TABELLA MODULI ========== -->
    <template id="admin-moduli-template">
        <div class="admin-section">
            <h3 class="admin-subtitle">Gestione Moduli</h3>
            <p class="admin-text">
                Attiva o disattiva ogni modulo. I moduli disattivati non compaiono pi√π in dashboard.
            </p>

            <div class="admin-toggle-row">
                <label>Dashboard</label>
                <input type="checkbox" data-modulo="dashboard" checked>
            </div>

            <div class="admin-toggle-row">
                <label>Assenze</label>
                <input type="checkbox" data-modulo="assenzePage" checked>
            </div>

            <div class="admin-toggle-row">
                <label>Turni</label>
                <input type="checkbox" data-modulo="turniPage" checked>
            </div>

            <div class="admin-toggle-row">
                <label>Comunicazioni</label>
                <input type="checkbox" data-modulo="comunicazioniPage" checked>
            </div>

            <div class="admin-toggle-row">
                <label>Procedure</label>
                <input type="checkbox" data-modulo="procedurePage" checked>
            </div>

            <div class="admin-toggle-row">
                <label>Archivio File</label>
                <input type="checkbox" data-modulo="archivioPage" checked>
            </div>

            <div class="admin-save-note">Modifiche salvate automaticamente</div>
        </div>
    </template>



    <!-- ========== TABELLA VISIBILIT√Ä ========== -->
    <template id="admin-visibilita-template">
        <div class="admin-section">
            <h3 class="admin-subtitle">Visibilit√† moduli per ruolo</h3>
            <p class="admin-text">
                Scegli chi pu√≤ vedere ogni modulo: Farmacia, Dipendente o Titolare.
            </p>

            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Modulo</th>
                        <th>Farmacia</th>
                        <th>Dipendente</th>
                        <th>Titolare</th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <td>Assenze</td>
                        <td><input type="checkbox" data-vis="farmacia-assenze" checked></td>
                        <td><input type="checkbox" data-vis="dipendente-assenze" checked></td>
                        <td><input type="checkbox" data-vis="titolare-assenze" checked></td>
                    </tr>

                    <tr>
                        <td>Turni</td>
                        <td><input type="checkbox" data-vis="farmacia-turni" checked></td>
                        <td><input type="checkbox" data-vis="dipendente-turni" checked></td>
                        <td><input type="checkbox" data-vis="titolare-turni" checked></td>
                    </tr>

                    <tr>
                        <td>Comunicazioni</td>
                        <td><input type="checkbox" data-vis="farmacia-comunicazioni" checked></td>
                        <td><input type="checkbox" data-vis="dipendente-comunicazioni" checked></td>
                        <td><input type="checkbox" data-vis="titolare-comunicazioni" checked></td>
                    </tr>

                    <tr>
                        <td>Procedure</td>
                        <td><input type="checkbox" data-vis="farmacia-procedure" checked></td>
                        <td><input type="checkbox" data-vis="dipendente-procedure" checked></td>
                        <td><input type="checkbox" data-vis="titolare-procedure" checked></td>
                    </tr>

                    <tr>
                        <td>Archivio File</td>
                        <td><input type="checkbox" data-vis="farmacia-archivio" checked></td>
                        <td><input type="checkbox" data-vis="dipendente-archivio" checked></td>
                        <td><input type="checkbox" data-vis="titolare-archivio" checked></td>
                    </tr>

                </tbody>
            </table>

            <div class="admin-save-note">Salvataggio automatico</div>
        </div>
    </template>



    <!-- ========== TABELLA NOTIFICHE ========== -->
    <template id="admin-notifiche-template">
        <div class="admin-section">
            <h3 class="admin-subtitle">Centro Notifiche</h3>
            <p class="admin-text">
                Controlla pallini, reset messaggi, forza aggiornamenti notifiche.
            </p>

            <button class="admin-btn" data-admin-action="clear-all">
                üîÑ Segna tutte come lette
            </button>

            <button class="admin-btn" data-admin-action="reset-notifiche">
                üßπ Ripristina notifiche demo
            </button>

            <button class="admin-btn" data-admin-action="refresh-ui">
                ‚ôª Aggiorna interfaccia
            </button>

            <div class="admin-small-info">
                Ultimo aggiornamento notifiche: <span id="adminNotifUpdate">‚Äî</span>
            </div>
        </div>
    </template>



    <!-- ========== IMPOSTAZIONI ========== -->
    <template id="admin-impostazioni-template">
        <div class="admin-section">
            <h3 class="admin-subtitle">Impostazioni del portale</h3>

            <div class="admin-toggle-row">
                <label>Modalit√† testo grande</label>
                <input type="checkbox" id="adminTextLarge">
            </div>

            <div class="admin-toggle-row">
                <label>Modalit√† contrasto alto (per pap√†)</label>
                <input type="checkbox" id="adminHighContrast">
            </div>

            <div class="admin-toggle-row">
                <label>Layout Dashboard</label>
                <select id="adminDashboardLayout">
                    <option value="A">Layout A (pulito)</option>
                    <option value="B">Layout B (modulare)</option>
                    <option value="C">Layout C (compatto)</option>
                </select>
            </div>

            <div class="admin-save-note">Modifiche immediate</div>
        </div>
    </template>



    <!-- ========== MANUTENZIONE ========== -->
    <template id="admin-manutenzione-template">
        <div class="admin-section">
            <h3 class="admin-subtitle">Manutenzione</h3>

            <button class="admin-btn danger" data-admin-action="reset-storage">
                ‚ùå Reset completo dati (localStorage)
            </button>

            <button class="admin-btn" data-admin-action="show-log">
                üìú Mostra log portale
            </button>

            <button class="admin-btn" data-admin-action="reload-app">
                üîÅ Ricarica Applicazione
            </button>

            <div class="admin-small-info">
                Versione portale: <strong id="portalVersion">v1.0.0</strong>
            </div>
        </div>
    </template>
        <!-- ============================================================
         OVERLAY NOTIFICHE (PALLINI / AVVISI)
    =============================================================== -->
    <div id="notificationOverlay" class="notif-overlay hidden">

        <div class="notif-backdrop"></div>

        <div class="notif-modal">

            <button id="notifClose" class="notif-close">‚úï</button>

            <h3 id="notifTitle" class="notif-title">Notifiche</h3>
            <p id="notifIntro" class="notif-intro">
                Qui vedrai il dettaglio delle notifiche per ogni sezione.
            </p>

            <div id="notifList" class="notif-list">
                <!-- riempito via JS -->
            </div>

            <div class="notif-footer">
                <button id="notifCloseBottom" class="primary-btn small">
                    Chiudi
                </button>
            </div>

        </div>

    </div>

</div> <!-- /#app -->


<!-- ============================================================
     SCRIPT
=============================================================== -->
<script src="script.js"></script>

</body>
</html>
