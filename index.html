<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Portale Farmacia Montesano ‚Äì Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-root">

    <!-- =========================
         SCHERMATA LOGIN / REGISTER
         ========================= -->
    <section id="auth-screen" class="auth-screen">
      <header class="auth-header">
        <h1>Portale Farmacia Montesano</h1>
        <p>Accesso demo e registrazione utenti</p>
      </header>

      <div class="auth-card">
        <div class="auth-tabs">
          <button class="auth-tab auth-tab--active" data-auth-tab="login">Login</button>
          <button class="auth-tab" data-auth-tab="register">Registrazione</button>
        </div>

        <div class="auth-panels">
          <!-- LOGIN -->
          <div id="auth-panel-login" class="auth-panel auth-panel--active">
            <div class="auth-columns">
              <div class="auth-col">
                <h2>Accesso veloce (demo)</h2>
                <p class="auth-note">
                  Per ora nessuna password: scegli il profilo e accedi subito alla dashboard.
                </p>
                <div class="auth-quick-buttons">
                  <button class="btn-primary" data-demo-login="farmacia">
                    Entra come Farmacia
                  </button>
                  <button class="btn-secondary" data-demo-login="titolare">
                    Entra come Titolare
                  </button>
                </div>

                <div class="auth-quick-grid">
                  <button class="btn-chip" data-demo-login="Fazzino Cosimo">Fazzino Cosimo</button>
                  <button class="btn-chip" data-demo-login="Rizzelli Patrizia">Rizzelli Patrizia</button>
                  <button class="btn-chip" data-demo-login="Andrisani Daniela">Andrisani Daniela</button>
                  <button class="btn-chip" data-demo-login="Zavaliche Anamaria">Zavaliche Anamaria</button>
                  <button class="btn-chip" data-demo-login="Maragno Annalisa">Maragno Annalisa</button>
                  <button class="btn-chip" data-demo-login="Veneziano Roberta">Veneziano Roberta</button>
                </div>
              </div>

              <div class="auth-col auth-col-border">
                <h2>Login classico</h2>
                <form id="login-form">
                  <label>
                    Username
                    <input type="text" id="login-username" autocomplete="username" />
                  </label>
                  <label>
                    Password
                    <input type="password" id="login-password" autocomplete="current-password" />
                  </label>
                  <button type="submit" class="btn-primary btn-full">
                    Accedi
                  </button>
                  <p class="auth-small">
                    Per ora, se i dati non coincidono con un utente salvato, entrerai comunque
                    come <strong>Farmacia (demo)</strong>.
                  </p>
                </form>
              </div>
            </div>
          </div>
                    <!-- REGISTRAZIONE -->
          <div id="auth-panel-register" class="auth-panel">
            <h2>Crea un nuovo utente</h2>
            <form id="register-form" class="auth-form-grid">
              <label>
                Tipo utente *
                <select id="reg-role" required>
                  <option value="">Seleziona‚Ä¶</option>
                  <option value="dipendente">Dipendente</option>
                  <option value="cliente">Cliente</option>
                </select>
              </label>

              <label>
                Nome e cognome *
                <input type="text" id="reg-fullname" required />
              </label>

              <label>
                Username *
                <input type="text" id="reg-username" autocomplete="username" required />
              </label>

              <label>
                Password *
                <input type="password" id="reg-password" autocomplete="new-password" required />
              </label>

              <label>
                Telefono <span id="reg-phone-hint">(obbligatorio per i clienti)</span>
                <input type="tel" id="reg-phone" />
              </label>

              <label>
                Email (facoltativa)
                <input type="email" id="reg-email" />
              </label>

              <div class="auth-form-actions">
                <button type="submit" class="btn-primary">
                  Registra utente
                </button>
                <p class="auth-small">
                  Gli utenti registrati vengono salvati solo su questo dispositivo (localStorage).
                </p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- =========================
         SCHERMATA DASHBOARD
         ========================= -->
    <div id="dashboard-screen" class="dashboard-screen" style="display:none;">
      <header class="topbar">
        <div class="topbar-left">
          <button class="hamburger" id="btn-menu">
            <span></span><span></span><span></span>
          </button>
          <div class="topbar-title">
            <div class="topbar-sub">Portale interno</div>
            <div class="topbar-main">PORTALE FARMACIA MONTESANO</div>
            <div class="topbar-sub">Dashboard principale</div>
          </div>
        </div>

        <div class="topbar-right">
          <div class="topbar-user">
            <span id="topbar-user-name">Farmacia Montesano (demo)</span>
          </div>
          <button id="btn-logout" class="link-button">Esci</button>
        </div>
      </header>

      <main class="dashboard-grid">
        <!-- Q1: SEZIONI FARMACIA -->
        <section class="quadrant quadrant-top-left">
          <header class="quadrant-header">
            <h2>SEZIONI FARMACIA</h2>
            <p>Accesso rapido alle aree operative.</p>
          </header>

          <div class="sections-grid">
            <button class="section-pill pill-green" data-section="assenti">
              Assenti / Permessi
            </button>
            <button class="section-pill pill-blue" data-section="turno">
              Farmacia di turno
            </button>
            <button class="section-pill pill-pink" data-section="comunicazioni">
              Comunicazioni
            </button>

            <button class="section-pill pill-teal" data-section="procedure">
              Procedure
            </button>
            <button class="section-pill pill-orange" data-section="logistica">
              Logistica
            </button>
            <button class="section-pill pill-cyan" data-section="magazziniera">
              Magazziniera
            </button>

            <button class="section-pill pill-red" data-section="scadenze">
              Prodotti in scadenza
            </button>
            <button class="section-pill pill-green2" data-section="consumabili">
              Consumabili
            </button>
            <button class="section-pill pill-purple" data-section="archivio">
              Consegne / Archivio file
            </button>
          </div>
        </section>
                <!-- Q2: PANORAMICA / CONTENUTI -->
        <section class="quadrant quadrant-top-right">
          <header class="quadrant-header">
            <h2>PANORAMICA RAPIDA</h2>
            <p>Vedi subito cosa succede oggi. Dopo 20 secondi senza click torni a questa vista.</p>
          </header>

          <!-- Vista predefinita -->
          <div id="panoramica-wrapper" class="panorama-grid">
            <div class="panorama-card">
              <div class="p-icon">üìÖ</div>
              <div class="p-main">
                <div class="p-title">Servizi di oggi</div>
                <div class="p-value" id="p-servizi-oggi">0</div>
                <div class="p-caption">Appuntamenti e servizi programmati.</div>
              </div>
            </div>

            <div class="panorama-card">
              <div class="p-icon">‚úÖ</div>
              <div class="p-main">
                <div class="p-title">Assenze confermate</div>
                <div class="p-value" id="p-assenze">0</div>
                <div class="p-caption">Chi manca oggi e nei prossimi giorni.</div>
              </div>
            </div>

            <div class="panorama-card">
              <div class="p-icon">üßæ</div>
              <div class="p-main">
                <div class="p-title">Prodotti in scadenza (7 gg)</div>
                <div class="p-value" id="p-scadenze">0</div>
                <div class="p-caption">Articoli da smaltire a breve.</div>
              </div>
            </div>

            <div class="panorama-card">
              <div class="p-icon">‚≠ê</div>
              <div class="p-main">
                <div class="p-title">Offerte attive</div>
                <div class="p-value" id="p-offerte">0</div>
                <div class="p-caption">Promo e pacchetti in corso.</div>
              </div>
            </div>

            <div class="panorama-card">
              <div class="p-icon">üì£</div>
              <div class="p-main">
                <div class="p-title">Comunicazioni non lette</div>
                <div class="p-value" id="p-comunicazioni">1</div>
                <div class="p-caption">Note operative interne.</div>
              </div>
            </div>
          </div>

          <!-- Contenuto sezione selezionata -->
          <div id="section-content" class="section-content" style="display:none;"></div>
        </section>

        <!-- Q3: PROMOZIONI & GIORNATE -->
        <section class="quadrant quadrant-bottom-left">
          <header class="quadrant-header">
            <h2>PROMOZIONI &amp; GIORNATE IN FARMACIA</h2>
            <p>Cosa stiamo offrendo e cosa c‚Äô√® in programma.</p>
          </header>

          <div class="promo-grid">
            <div class="promo-column">
              <div class="promo-header-row">
                <h3>Offerte in corso</h3>
                <button class="btn-chip" id="btn-add-offerta">+ Aggiungi</button>
              </div>
              <div id="offerte-list" class="promo-list">
                <!-- dinamico -->
              </div>
            </div>

            <div class="promo-column">
              <div class="promo-header-row">
                <h3>Giornate in farmacia</h3>
                <button class="btn-chip" id="btn-add-giornata">+ Aggiungi</button>
              </div>
              <div id="giornate-list" class="promo-list">
                <!-- dinamico -->
              </div>
            </div>
          </div>

          <div class="promo-footer">
            <button id="btn-all-promos" class="link-button">
              Vedi tutte le offerte e le giornate
            </button>
          </div>
        </section>
                <!-- Q4: AGENDA SERVIZI -->
        <section class="quadrant quadrant-bottom-right">
          <header class="quadrant-header">
            <h2>AGENDA SERVIZI</h2>
            <p>Gestione appuntamenti, servizi ed esami.</p>
          </header>

          <div class="agenda-top-row">
            <button id="btn-new-appt" class="btn-primary">+ Nuovo appuntamento</button>
            <div class="agenda-month-nav">
              <button id="btn-month-prev" class="icon-button" aria-label="Mese precedente">‚Äπ</button>
              <span id="agenda-month-label">novembre 2025</span>
              <button id="btn-month-next" class="icon-button" aria-label="Mese successivo">‚Ä∫</button>
            </div>
          </div>

          <div class="agenda-calendar" id="agenda-calendar">
            <!-- calendario generato da JS -->
          </div>
        </section>
      </main>

      <!-- FAB azione rapida (puoi usarla in futuro) -->
      <button id="fab-quick" class="fab-btn" title="Azione rapida">
        ‚öôÔ∏è
      </button>
    </div>

    <!-- ================
         MODALI GLOBALI
         ================ -->

    <!-- Modal: Nuova / Modifica Offerta -->
    <div id="modal-offerta" class="modal hidden">
      <div class="modal-body">
        <header class="modal-header">
          <h3 id="modal-offerta-title">Nuova offerta in corso</h3>
          <button class="icon-button" data-close="modal-offerta">‚úï</button>
        </header>

        <form id="form-offerta" class="modal-form">
          <input type="hidden" id="offerta-id" />

          <label>
            Titolo offerta *
            <input type="text" id="offerta-titolo" required />
          </label>

          <div class="modal-row-2">
            <label>
              Dal *
              <input type="date" id="offerta-from" required />
            </label>
            <label>
              Al *
              <input type="date" id="offerta-to" required />
            </label>
          </div>

          <label>
            Note
            <textarea id="offerta-note" rows="2"></textarea>
          </label>

          <footer class="modal-footer">
            <button type="button" class="btn-secondary" data-close="modal-offerta">
              Annulla
            </button>
            <button type="submit" class="btn-primary">Salva</button>
          </footer>
        </form>
      </div>
    </div>
        <!-- Modal: Nuova / Modifica Giornata -->
    <div id="modal-giornata" class="modal hidden">
      <div class="modal-body">
        <header class="modal-header">
          <h3 id="modal-giornata-title">Nuova giornata in farmacia</h3>
          <button class="icon-button" data-close="modal-giornata">‚úï</button>
        </header>

        <form id="form-giornata" class="modal-form">
          <input type="hidden" id="giornata-id" />

          <label>
            Titolo giornata *
            <input type="text" id="giornata-titolo" required />
          </label>

          <div class="modal-row-2">
            <label>
              Dal *
              <input type="date" id="giornata-from" required />
            </label>
            <label>
              Al *
              <input type="date" id="giornata-to" required />
            </label>
          </div>

          <label>
            Note
            <textarea id="giornata-note" rows="2"></textarea>
          </label>

          <footer class="modal-footer">
            <button type="button" class="btn-secondary" data-close="modal-giornata">
              Annulla
            </button>
            <button type="submit" class="btn-primary">Salva</button>
          </footer>
        </form>
      </div>
    </div>

    <!-- Modal: Nuovo appuntamento -->
    <div id="modal-appt" class="modal hidden">
      <div class="modal-body">
        <header class="modal-header">
          <h3 id="modal-appt-title">Nuovo appuntamento</h3>
          <button class="icon-button" data-close="modal-appt">‚úï</button>
        </header>

        <form id="form-appt" class="modal-form">
          <input type="hidden" id="appt-id" />

          <label>
            Data *
            <input type="date" id="appt-date" required />
          </label>

          <div class="modal-row-2">
            <label>
              Ora inizio *
              <input type="time" id="appt-from" required />
            </label>
            <label>
              Ora fine *
              <input type="time" id="appt-to" required />
            </label>
          </div>

          <label>
            Nome e cognome paziente *
            <input type="text" id="appt-name" required />
          </label>

          <label>
            Servizio / esame *
            <input type="text" id="appt-service" required />
          </label>

          <label>
            Telefono paziente *
            <input type="tel" id="appt-phone" required />
          </label>

          <footer class="modal-footer">
            <button type="button" class="btn-secondary" data-close="modal-appt">
              Annulla
            </button>
            <button type="submit" class="btn-primary">Salva</button>
          </footer>
        </form>
      </div>
    </div>

    <!-- Modal: Appuntamenti del giorno -->
    <div id="modal-day" class="modal hidden">
      <div class="modal-body">
        <header class="modal-header">
          <h3 id="modal-day-title">Appuntamenti</h3>
          <button class="icon-button" data-close="modal-day">‚úï</button>
        </header>
        <ul id="modal-day-list" class="day-popup-list"></ul>
      </div>
    </div>

    <!-- Modal: tutte le offerte e le giornate -->
    <div id="modal-promos" class="modal hidden">
      <div class="modal-body">
        <header class="modal-header">
          <h3>Offerte e giornate</h3>
          <button class="icon-button" data-close="modal-promos">‚úï</button>
        </header>

        <div class="promos-modal-section">
          <h4>Offerte attive</h4>
          <div id="modal-offerte-attive"></div>
        </div>

        <div class="promos-modal-section">
          <h4>Offerte scadute</h4>
          <div id="modal-offerte-scadute"></div>
        </div>

        <div class="promos-modal-section">
          <h4>Giornate in programma</h4>
          <div id="modal-giornate-attive"></div>
        </div>

        <div class="promos-modal-section">
          <h4>Giornate concluse</h4>
          <div id="modal-giornate-scadute"></div>
        </div>

        <footer class="modal-footer">
          <button class="btn-secondary" data-close="modal-promos">Chiudi</button>
        </footer>
      </div>
    </div>

  </div> <!-- /.app-root -->

  <script src="script.js"></script>
</body>
</html>
